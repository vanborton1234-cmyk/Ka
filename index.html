<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ù‚ÙˆÙŠ Ù„Ù„ÙŠÙˆØªÙŠÙˆØ¨ - Ø­Ù…Ø§ÙŠØ© Ø¹Ø§Ù„ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* ---------------------------------------------------- */
        /* 1. Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø²Ø§Ù‡ÙŠØ© (Ù…Ø¸Ù‡Ø± Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆØ¬Ø°Ø§Ø¨) */
        /* ---------------------------------------------------- */
        :root {
            --main-font: 'Cairo', sans-serif;
            --decorative-font: 'Amiri', serif;
            --bg-color: #f0f4f8; /* Ø®Ù„ÙÙŠØ© Ù†Ø§Ø¹Ù…Ø© */
            --text-color: #1c2e4a;
            --primary-color: #ff0000; /* ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ø£Ø­Ù…Ø± Ø§Ù„Ø²Ø§Ù‡ÙŠ */
            --accent-color: #007bff; /* Ù„ÙˆÙ† Ù…ØªØ­Ø±Ùƒ (Ø£Ø²Ø±Ù‚ Ù†ÙŠÙˆÙ†) */
            --secondary-color: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.15);
            --sidebar-bg: #e0e6ec;
        }

        .dark-mode {
            --bg-color: #0d1117; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ø¬Ø¯Ø§Ù‹ */
            --text-color: #c9d1d9;
            --secondary-color: #161b22;
            --shadow-color: rgba(255, 255, 255, 0.08);
            --sidebar-bg: #1f2a38;
        }

        /* ---------------------------------------------------- */
        /* 2. Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ù‡ÙŠÙƒÙ„ ÙˆØ§Ù„Ø®Ø· */
        /* ---------------------------------------------------- */
        body {
            font-family: var(--main-font);
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.5s, color 0.5s;
            direction: rtl; 
            min-height: 100vh;
        }

        /* ---------------------------------------------------- */
        /* 3. Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„Ø«Ø§Ø¨Øª */
        /* ---------------------------------------------------- */
        .container { display: flex; }
        .sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            padding: 20px 15px;
            box-shadow: 2px 0 15px var(--shadow-color);
            position: fixed; 
            height: 100%;
            text-align: center;
        }

        .decorative-text {
            font-family: var(--decorative-font);
            font-size: 1.6em;
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 50px;
            padding: 20px 10px;
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            display: block;
            line-height: 1.8;
            background-color: var(--secondary-color);
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
            animation: pulse 2s infinite; /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ Ø§Ù„Ø¹Ø§Ø¦Ù… */
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.02); opacity: 1; }
            100% { transform: scale(1); opacity: 0.9; }
        }

        .main-content {
            margin-right: 280px; 
            flex-grow: 1;
            padding: 40px;
            max-width: calc(100% - 280px);
        }

        /* ---------------------------------------------------- */
        /* 4. Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© (FABs) */
        /* ---------------------------------------------------- */
        .fab-group {
            position: fixed;
            left: 30px; 
            bottom: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 999;
        }

        .fab {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.6em;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Ø­Ø±ÙƒØ© Ù…ØªØ·ÙˆØ±Ø© */
            text-decoration: none;
        }
        .fab:hover {
            transform: scale(1.15) rotate(5deg);
        }

        .fab-telegram-1 { background-color: #0088cc; }
        .fab-telegram-2 { background-color: #0088cc; }
        .fab-chat { background-color: #4CAF50; }

        /* ---------------------------------------------------- */
        /* 5. ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© */
        /* ---------------------------------------------------- */
        .card {
            background-color: var(--secondary-color);
            padding: 30px;
            margin-bottom: 35px;
            border-radius: 20px;
            box-shadow: 0 15px 40px var(--shadow-color);
            transition: all 0.4s ease-in-out;
            border-top: 5px solid var(--accent-color);
        }
        .card:hover {
            transform: translateY(-5px); /* ØªØ£Ø«ÙŠØ± Ø¹Ø§Ø¦Ù… Ø¬Ø°Ø§Ø¨ */
            box-shadow: 0 20px 50px var(--shadow-color);
        }
        
        .input-group { display: flex; gap: 10px; align-items: center; }
        .input-group input, .input-group button {
            border: none;
            padding: 16px 22px;
            border-radius: 12px;
            font-size: 1.1em;
            font-family: var(--main-font);
            transition: all 0.3s;
        }
        .input-group input {
            flex-grow: 1;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 3px solid transparent;
        }
        .input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
        }
        .input-group button {
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            font-weight: 700;
        }
        .input-group button:hover {
            background-color: #cc0000;
            transform: scale(1.05); 
        }

        /* Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙØ§Ø±Øº */
        .video-placeholder {
            width: 100%;
            padding-bottom: 56.25%; 
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--sidebar-bg) 100%);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            font-size: 1.5em;
            border: 3px dashed var(--accent-color);
            height: 0;
            position: relative;
        }
        #youtube-player {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 10;
        }

        /* ---------------------------------------------------- */
        /* 6. Ù†Ø§ÙØ°Ø© Ø§Ù„Ù‚ÙÙ„ Ø§Ù„Ø£Ù…Ù†ÙŠ (Access Gate) */
        /* ---------------------------------------------------- */
        #access-gate {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s;
        }
        .gate-card {
            background-color: #1c1c1c;
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(255, 255, 255, 0.2);
            animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .gate-card input {
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
            border: 2px solid var(--primary-color);
            background-color: #0d1117;
            color: white;
            width: 250px;
            font-size: 1.1em;
            text-align: center;
        }
        .gate-card button {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            margin-top: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .gate-card button:hover { background-color: #cc0000; }
        
    </style>
</head>
<body>

    <div id="access-gate">
        <div class="gate-card">
            <h2>ğŸ” Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</h2>
            <p>Ø§Ù„Ø±Ù…Ø² Ù‡Ùˆ: <span style="color: var(--primary-color); font-weight: bold;">A6791637SD6</span> (11 Ø®Ø§Ù†Ø©)</p>
            <input type="text" id="access-code" placeholder="AXXX1XXXSDX6" maxlength="11">
            <button onclick="checkAccessCode()">ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
            <p id="gate-message" style="color: yellow; margin-top: 10px;"></p>
        </div>
    </div>

    <div class="container" id="site-content" style="opacity: 0;">
        
        <div class="sidebar">
            <div class="sidebar-content">
                <p class="decorative-text">
                    Ù‡Ù„ ØµÙ„ÙŠØª Ø§Ù„ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ù…Ø­Ù…Ø¯ ÙˆØ§Ù„ Ù…Ø­Ù…Ø¯
                </p>
            </div>
            <div style="margin-top: 30px;">
                <h3 style="color: var(--accent-color);">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´ØºÙ„</h3>
                <p style="font-size: 0.9em;">
                    Ù…Ø´ØºÙ„ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© Ù„Ø¬Ù…ÙŠØ¹ ØµÙŠØº Ø±ÙˆØ§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨.
                    <br>
                    <i class="fas fa-shield-alt"></i> Ø­Ù…Ø§ÙŠØ© Ø¹Ø§Ù„ÙŠØ© ÙˆØ³Ø±Ø¹Ø© ÙØ§Ø¦Ù‚Ø©.
                </p>
            </div>
        </div>

        <div class="fab-group">
            <a href="https://t.me/salam_Ala_El_Yaseen" target="_blank" class="fab fab-telegram-1" title="Ù‚Ù†Ø§Ø© Ø³Ù„Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„ ÙŠØ§Ø³ÙŠÙ†">
                <i class="fab fa-telegram-plane"></i>
            </a>
            <a href="https://t.me/+oVaBHlOVKFsyODIy" target="_blank" class="fab fab-telegram-2" title="Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª">
                <i class="fas fa-tasks"></i>
            </a>
            <a href="#" class="fab fab-chat" title="Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ø§Ù„Ù…ØµÙ…Ù…" onclick="alert('Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø²Ø± Ù„ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¯Ø±Ø¯Ø´Ø© Ø­ÙŠØ© (ÙŠØªØ·Ù„Ø¨ Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø®Ø§Ø±Ø¬ÙŠØ©).')">
                <i class="fas fa-comments"></i>
            </a>
        </div>

        <button class="theme-switch" id="theme-toggle">ØªØ¨Ø¯ÙŠÙ„ Ù„Ù„Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ù„ÙŠÙ„ÙŠØ©</button>

        <div class="main-content">
            
            <h1>ğŸ¬ Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ù‚ÙˆÙŠ (Ø´Ø§Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·)</h1>

            <div class="card">
                <h3>ØªØ´ØºÙŠÙ„ ÙØ§Ø¦Ù‚ Ø§Ù„Ø³Ø±Ø¹Ø© Ø¹Ø¨Ø± Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø·</h3>
                <div class="input-group">
                    <input type="url" id="link-input" placeholder="Ø£Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ ÙŠÙˆØªÙŠÙˆØ¨ Ù‡Ù†Ø§ ÙˆØ´ØºÙ‘Ù„... (ÙŠØ¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙŠØº)">
                    <button onclick="playLink()"><i class="fas fa-rocket"></i> ØªØ´ØºÙŠÙ„ Ø³Ø±ÙŠØ¹</button>
                </div>
            </div>

            <div class="card player-area">
                <h3>Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ù‚ÙˆÙŠ (HDR Ready)</h3>
                <div class="video-placeholder" id="player-placeholder">
                    <i class="fas fa-video"></i> Ø£Ù„ØµÙ‚ Ø±Ø§Ø¨Ø·Ø§Ù‹ Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¯Ù‚Ø©
                    <div id="youtube-player"></div>
                </div>
            </div>

            <div class="card">
                <h3>Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹ ÙˆÙ…Ø¨Ø§Ø´Ø± ÙÙŠ ÙŠÙˆØªÙŠÙˆØ¨ (ÙŠØªØ·Ù„Ø¨ API Key)</h3>
                <div class="input-group" style="margin-bottom: 15px;">
                    <input type="text" id="search-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø±Ø©...">
                    <button onclick="searchVideos()"><i class="fas fa-search"></i> Ø§Ø¨Ø­Ø«</button>
                </div>

                <div id="search-api-setup">
                    <h4>ØªÙØ¹ÙŠÙ„ Ù…ÙŠØ²Ø© Ø§Ù„Ø¨Ø­Ø« (Ù‡Ø§Ù…)</h4>
                    <p style="font-size: 0.9em; line-height: 1.6;">
                        Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø­Ø«ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ YouTube Data API Key Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©.
                    </p>
                    <div class="input-group">
                        <input type="text" id="api-key-input" placeholder="Ø£Ù„ØµÙ‚ Ù…ÙØªØ§Ø­ YouTube API Key Ù‡Ù†Ø§...">
                        <button onclick="saveApiKey()">Ø­ÙØ¸ ÙˆØªÙØ¹ÙŠÙ„</button>
                    </div>
                    
                    <a href="https://console.cloud.google.com/apis/credentials" target="_blank" style="display: inline-block; margin-top: 10px; color: var(--accent-color); text-decoration: none; font-weight: bold;">
                        <i class="fas fa-external-link-alt"></i> Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
                    </a>
                    <div id="search-results"></div>
                </div>
            </div>

        </div>

    </div>

    <script>
        // ----------------------------------------------------
        // Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆØ§Ù„Ø£Ù…Ù†
        // ----------------------------------------------------

        // 1. Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚ÙÙ„ Ø§Ù„Ø£Ù…Ù†ÙŠ Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© (Local Storage)
        const CORRECT_CODE = 'A6791637SD6'; // Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙØµØ­Ø­ Ù„ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø·Ù„Ø¨Ùƒ
        const ACCESS_KEY = 'siteAccessGranted';

        function checkAccessCode() {
            const inputCode = document.getElementById('access-code').value.toUpperCase().trim();
            const messageElement = document.getElementById('gate-message');

            if (inputCode === CORRECT_CODE) {
                // Ù…Ù†Ø­ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© ÙˆØ­ÙØ¸Ù‡Ø§
                localStorage.setItem(ACCESS_KEY, 'true');
                document.getElementById('access-gate').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('access-gate').style.display = 'none';
                    document.getElementById('site-content').style.opacity = '1';
                }, 500);
            } else {
                messageElement.textContent = 'Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­. Ø§Ù„Ø±Ù…Ø² Ø§Ù„ØµØ­ÙŠØ­ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ A ÙˆÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù€ 6.';
            }
        }

        function initialAccessCheck() {
            if (localStorage.getItem(ACCESS_KEY) === 'true') {
                document.getElementById('access-gate').style.display = 'none';
                document.getElementById('site-content').style.opacity = '1';
            }
        }
        // ØªØ­Ù‚Ù‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = initialAccessCheck;


        // 2. Ù†Ø¸Ø§Ù… ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ
        const themeToggle = document.getElementById('theme-toggle');
        const body = document.body;
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            
            if (body.classList.contains('dark-mode')) {
                themeToggle.textContent = 'ØªØ¨Ø¯ÙŠÙ„ Ù„Ù„Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠØ©';
            } else {
                themeToggle.textContent = 'ØªØ¨Ø¯ÙŠÙ„ Ù„Ù„Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ù„ÙŠÙ„ÙŠØ©';
            }
        });


        // 3. ØªÙØ¹ÙŠÙ„ Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨ API (Ù„Ø¬Ù…ÙŠØ¹ ØµÙŠØº Ø§Ù„Ø±ÙˆØ§Ø¨Ø·)
        let player;
        let isPlayerReady = false;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '100%',
                width: '100%',
                videoId: null,
                playerVars: {
                    'playsinline': 1,
                    'autoplay': 1, 
                    'modestbranding': 1, 
                    'rel': 0 
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        function onPlayerReady(event) {
            isPlayerReady = true;
            document.getElementById('player-placeholder').style.zIndex = 1; 
            document.getElementById('player-placeholder').style.border = 'none';
        }

        function onPlayerStateChange(event) {
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù€ placeholder Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
            if (event.data === YT.PlayerState.PLAYING) {
                document.getElementById('player-placeholder').style.zIndex = -1; 
            }
        }


        // 4. ÙˆØ¸ÙŠÙØ© Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· (ØªÙ… ØªÙ‚ÙˆÙŠØªÙ‡Ø§)
        function getVideoId(url) {
            if (!url) return null;
            // ÙŠØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
            const cleanedUrl = url.trim(); 
            // ÙˆØ¸ÙŠÙØ© Ù…Ø·ÙˆØ±Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø¹Ø±Ù‘Ù Ù…Ù† Ù…Ø®ØªÙ„Ù ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø±ÙˆØ§Ø¨Ø·
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|\w\S*?v=|v\/|u\/\w\/|embed\/|shorts\/)|youtu\.be\/)([\w-]{11})/;
            const match = cleanedUrl.match(regex);
            return match ? match[1] : null;
        }

        function playLink() {
            // ØªÙ… Ø¥Ø¶Ø§ÙØ© .trim() Ù‡Ù†Ø§ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙÙ„ØµÙ‚
            const link = document.getElementById('link-input').value.trim(); 
            const videoId = getVideoId(link);

            if (videoId && isPlayerReady) {
                document.getElementById('player-placeholder').innerHTML = '';
                player.loadVideoById(videoId);
                document.getElementById('player-placeholder').style.zIndex = 10; 
                document.getElementById('player-placeholder').style.background = 'black';
            } else {
                alert('Ø¹Ø°Ø±Ø§Ù‹! Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù‘Ù ÙÙŠØ¯ÙŠÙˆ ÙŠÙˆØªÙŠÙˆØ¨ ØµØ§Ù„Ø­ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø·. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„ ÙˆØµØ­ÙŠØ­.');
            }
        }
        
        // 5. ÙˆØ¸Ø§Ø¦Ù API ÙˆØ§Ù„Ø¨Ø­Ø«
        const API_KEY_STORAGE = 'youtubeApiKey';
        let storedApiKey = localStorage.getItem(API_KEY_STORAGE);

        // ÙˆØ¸ÙŠÙØ© Ù„Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØªÙØ¹ÙŠÙ„Ù‡
        function saveApiKey() {
            const apiKeyInput = document.getElementById('api-key-input').value.trim();
            if (apiKeyInput.length > 20) {
                localStorage.setItem(API_KEY_STORAGE, apiKeyInput);
                storedApiKey = apiKeyInput;
                alert('ØªÙ… Ø­ÙØ¸ Ù…ÙØªØ§Ø­ API Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø­Ø«.');
                document.getElementById('api-key-input').placeholder = 'ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¨Ù†Ø¬Ø§Ø­!';
                document.getElementById('api-key-input').value = '';
            } else {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ API ØµØ§Ù„Ø­ ÙˆØ·ÙˆÙŠÙ„.');
            }
        }

        function searchVideos() {
            const query = document.getElementById('search-input').value;
            const resultsContainer = document.getElementById('search-results');

            if (!storedApiKey) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø­ÙØ¸ Ù…ÙØªØ§Ø­ API Ø£ÙˆÙ„Ø§Ù‹ Ù„ØªØ´ØºÙŠÙ„ Ù…ÙŠØ²Ø© Ø§Ù„Ø¨Ø­Ø«.');
                return;
            }

            if (query.length < 3) {
                resultsContainer.innerHTML = `<p style="color: var(--primary-color);">
                    Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø¨Ø­Ø« Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† Ø«Ù„Ø§Ø«Ø© Ø£Ø­Ø±Ù.
                </p>`;
                return;
            }

            resultsContainer.innerHTML = `<p style="color: var(--accent-color); font-weight: bold;">
                âœ… Ø§Ù„Ù…ÙØªØ§Ø­ Ù…ÙÙØ¹Ù‘Ù„: ${storedApiKey.substring(0, 5)}...
                <br>
                **Ù„ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù‡Ù†Ø§:** ÙŠØ¬Ø¨ Ø§Ù„Ø¢Ù† Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù€ <span style="font-weight: bold;">Ø®Ø§Ø¯Ù… ÙˆØ³ÙŠØ· (Back-End Proxy)</span> Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¢Ù…Ù† Ù„ÙŠÙˆØªÙŠÙˆØ¨.
                </p>`;
            
        }

        // 6. ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© ÙŠÙˆØªÙŠÙˆØ¨ API
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>

</body>
</html>
